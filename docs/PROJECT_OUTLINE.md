# [KPC AI 훈련 확산센터] AI 훈련로드맵 생성 대시보드 기획안

---

## 1. 시스템 개요

본 시스템은 [KPC AI 훈련 확산센터]라는 사업의 운영 관점에서, **기업 진단 → 컨설턴트 배정 → 현장 인터뷰 → 교육 로드맵 산출**을 효율적이고 일관되게 수행하기 위한 B2B 내부용 대시보드입니다.

이 시스템이 생성하는 결과는 “범용적인 생성형 AI 활용 교육”이나 “밑바닥 코딩 교육”이 아니라, 다음을 만족해야 합니다.

- 세부직무/세부업무 단위로,
- 무료/무료범위/오픈소스 툴만 사용하여,
- 어떤 결과물(산출물)을 만들거나 혹은 실질적 업무개선을 이룰 수 있도록 하며,
- 업무가 얼마나(어떤 지표로) 개선되는지까지 제시되는,
- **현장 적용 가능한 구체 로드맵**이어야 합니다.

---

## 2. 운영 규모(가정)

- 컨설턴트(코치): 20~30명 내외
- 담당 기업: 약 200개(예: 20명 × 10개 기업)
- 본 시스템은 “다수 기업이 직접 사용”하는 것이 아니라 **운영사(우리) 내부의 운영관리자/컨설턴트만 사용**합니다.

이 가정에 따라, 시스템은 “대규모 트래픽”보다는 **정확한 권한 통제, 감사 추적, 비용 통제, 사용성(현장 입력), 결과물 품질**이 우선입니다.

---

## 3. 목표(제품 관점)

- 운영관리자가 고객사 자가진단 결과를 입력하면, 시스템이 **적합 컨설턴트 후보 Top-N**을 제시하고 배정을 돕는다.
- 배정된 컨설턴트가 현장 인터뷰를 입력하면, 시스템이 **세부직무별 NxM 로드맵**을 생성한다.
- 로드맵의 각 과정은 **구체 산출물/개선효과/측정방법/무료툴 전제**를 포함한다.
- NxM 중 코치가 실제로 수행할 **PBL 코칭 최적 과정 1개(≤40h)** 를 선정하고,
  - 선정 이유, 주차별 실행계획, 평가 기준, 산출물 제출 기준까지 제공한다.
- 결과물은 웹에서 **검토→수정 반복→최종 확정(FINAL)** 이 가능해야 하며,
  - 제출용 **PDF(전체)** 와 실행용 **XLSX(표/상세)** 로 내보낼 수 있어야 한다.
- 운영자는 비용을 통제(쿼터)하고, 누가 언제 무엇을 했는지(감사로그)를 확인할 수 있어야 한다.

---

## 4. 범위(Scope)

### 4.1 포함(In Scope)

- PUBLIC 랜딩/소개 화면(누구나 접근)
- 회원가입/로그인(이메일+비밀번호)
- 운영관리자 승인 후에만 핵심 기능 활성화
- **컨설턴트 프로필(스킬/전문분야/경력) 사전등록(회원가입 단계)**
- **기업 요청(프로젝트) 등록**: 운영관리자가 기업 기본 정보 입력
- **고객사 30문항 자가진단 결과 입력(운영관리자)** + 점수화/요약
- **기업-컨설턴트 매칭 추천** + 운영관리자 최종 배정/변경(이력+사유)
- 컨설턴트의 현장 인터뷰 입력(정형 + 자유서술)
- NxM 로드맵 생성/수정(버전 관리)
- 40시간 PBL 최적 과정 1개 선정(상세 계획 포함)
- PDF/XLSX 다운로드
- 파일 저장 정책: **최신 FINAL만 스토리지에 저장**
- 감사로그(사용기록) + 필터/다운로드
- 사용량/쿼터 관리(일/월 상한, KST 리셋)

### 4.2 제외(Out of Scope)

- 기업정보 자동 수집 API 연동(추후 과제)
- 고객사(외부 사용자) 직접 로그인/사용
- 이메일/문자 알림(초기 v1 제외)
- 대용량 파일 업로드/관리(녹취/영상/사진 등)
- 외부 시스템(ERP/MES/CRM 등) 자동 연동

---

## 5. 사용자 역할과 권한

### 5.1 역할 정의

- **PUBLIC(비로그인)**: 랜딩/소개/샘플(데모) 열람
- **USER_PENDING(승인 대기)**: 로그인만 가능, 핵심 기능 차단
- **CONSULTANT_APPROVED(승인된 컨설턴트/코치)**:
  - 본인 프로필 관리
  - **배정된 프로젝트만 접근**
  - 인터뷰 입력/수정
  - 로드맵 생성·수정·다운로드·FINAL 확정
  - 자가진단 결과는 **조회만**(수정 불가)
- **OPS_ADMIN(운영 관리자)**:
  - 사용자 승인/정지
  - 기업 요청(프로젝트) 생성/관리
  - 자가진단 결과 입력/템플릿 관리
  - 매칭 추천 조회 및 배정/변경(사유 기록)
  - 로드맵 열람(감사/품질관리 목적, 읽기 전용)
  - 감사로그/사용량/쿼터 관리
- **SYSTEM_ADMIN(시스템 관리자)**:
  - 배포/시크릿/인프라 운영
  - LLM API Key는 UI에서 조회 불가(서버 시크릿만)

### 5.2 승인 정책(필수)

- 회원가입은 누구나 가능하되, 기본 상태는 승인 대기(**PENDING**)입니다.
- 운영관리자 승인 후에만 CONSULTANT_APPROVED로 승격되어 핵심 기능 사용 가능.
- 승인되지 않은 사용자는 핵심 기능 버튼 클릭 시 차단 + 안내 문구 표시.
  - 권장 안내 문안 :
    - 제목: 승인 대기 중입니다.
    - 본문: 회원가입은 완료되었습니다. 관리자의 승인이 완료되면 AI 로드맵 생성 기능을 이용하실 수 있습니다.
- OPS_ADMIN(운영 관리자) 권한은 SYSTEM_ADMIN(시스템 관리자)이 사전에 지정합니다(운영관리자 계정 수는 제한).
- 운영관리자(OPS_ADMIN) 승격/해제는 초기에는 SYSTEM_ADMIN이 Supabase에서만 수행하며(운영관리자는 Supabase에 직접 로그인하지 않음), 앱 UI에서는 제공하지 않습니다.

---

## 6. 실제 서비스 프로세스(흐름 기준)

아래 흐름이 “서비스의 표준 운영 절차”입니다.

### 6.1 컨설턴트 프로필 사전등록(회원가입 단계)

컨설턴트는 가입 시 반드시 “매칭용 프로필”을 입력해야 합니다.

- 정형(체크/선택):
  - 전문분야(복수 선택), 가능 업종(복수 선택)
  - 강의 가능 레벨(초/중/고), 코칭 방식(PBL/워크숍/멘토링 등)
  - 보유 역량 태그(예: 데이터 전처리/업무자동화/문서·보고/품질·통계/보안·컴플라이언스 등)
- 서술:
  - 대표 수행경험/프로젝트, 강의 포트폴리오, 강점/제약(예: 제조 데이터 경험 有/보안 규정 경험 有 등)

> 핵심: 매칭은 “이 프로필 데이터”로 수행됩니다. 프로필이 빈약하면 매칭 품질이 내려가므로, UI에서 필수 입력/검증을 강제합니다.
>

### 6.2 고객사 자가진단(외부) → 운영관리자 입력(내부)

- 고객사는 30문항 자가진단을 작성해 운영관리자에게 전달(메일/파일/폼 등)합니다.
- **운영관리자(OPS_ADMIN)가 대시보드에서 프로젝트를 생성**하고,
  - 기업 기본 정보
  - 자가진단 30문항 응답
  - (선택) 고객 코멘트/요청사항
    을 **직접 입력**합니다.
- 자가진단 수정은 **OPS_ADMIN만** 가능하며, 자가진단이 수정되면 시스템은 “매칭 추천 재계산”을 수행할 수 있습니다.
- 다만 **기존 배정은 자동 변경하지 않으며**, 배정 변경은 OPS_ADMIN이 “변경 사유”를 남기고 수동으로 수행합니다(감사로그 기록).

### 6.3 매칭/배정(인터뷰 이전)

- 시스템은 **기업 정보 + 자가진단 결과**를 바탕으로, 승인된 컨설턴트 중 Top-N 후보를 추천하며, 후보별 매칭 근거(설명가능한 이유)를 제공합니다.
  - Top-N의 기본값은 **N=3**으로 합니다.
  - 추천 결과에는 후보별로 “매칭 점수(총점)”와 “점수 구성(항목별 점수)” 및 “근거(rationale)”를 함께 포함합니다.
  - 추천 후보군은 **CONSULTANT_APPROVED** 사용자 중 **상태가 정상(정지/비활성 제외)**인 계정만 포함합니다.
- 운영관리자는 추천을 참고하여 **최종 배정**하고, 배정/변경 사유를 남깁니다(감사로그 기록).

### 6.4 현장 인터뷰(배정 후) → 컨설턴트 입력

배정된 컨설턴트가 기업 방문 인터뷰를 하고, 아래를 입력합니다.

- 기업에 대한 세부 정보
- 세부직무/세부업무(가능하면 N개로 쪼개기)
- 현재 산출물/업무 흐름(AS-IS)
- 병목/페인포인트(우선순위 1~3)
- 데이터/시스템 제약(권한, 보안, 파일 접근, 표준 양식 등)
- 개선 목표(KPI 후보)와 “가능한 측정 방법”
  - 예: 처리시간(분), 오류율(%), 리드타임(일), 재작업률(%), 보고서 작성시간(시간) 등
- (가능하면) Before 수치
- 기업의 요구사항

### 6.5 로드맵 생성(인터뷰 이후)

대시보드는 다음 4종 입력을 모두 사용해 로드맵을 생성합니다.

- 기업 정보(운영관리자 입력)
- 자가진단 결과(운영관리자 입력)
- 현장 인터뷰 결과(컨설턴트 입력)
- **배정된 컨설턴트 프로필(경력/전문분야/스킬)**

그리고 “해당 컨설턴트가 실제로 코칭/강의 가능한 범위”를 중심으로 로드맵을 설계합니다.
(즉, 컨설턴트 역량과 동떨어진 과정은 원칙적으로 만들지 않습니다.)

### 6.6 수정/확정(버전 관리)

- 초안(DRAFT) v1 생성 → 수정 요청 반영 v2/v3… 생성(덮어쓰기 금지)
- 최종 확정(FINAL)은 1개만 유지
  - 새 버전을 FINAL로 확정하면 기존 FINAL은 ARCHIVED로 변경
- 다운로드는 모든 버전에서 가능하되,
  - 스토리지에는 **최신 FINAL PDF/XLSX만 저장**(나머지는 즉시 생성)

---

## 7. 로드맵 결과물 정의(출력 스펙)

### 7.1 기업 진단 결과

- 기업 진단 결과 요약 (기업의 핵심 페인 포인트, 문제점 및 병목 구간 등)

### 7.2 NxM 로드맵(행×열)

- **행(N)**: 세부직무/세부업무(예: “품질-수입검사”, “품질-불량원인분석”, “생산-작업지시”, …)
- **열(M)**: 초급 / 중급 / 고급
- 각 셀은 “구체 교육과정 1개”를 담습니다.

> “AI 활용 문서 생성” 수준의 범용적인 AI 교육은 금지합니다. 반드시 고객사 요구사항/페인포인트 등을 반영해 “직무-업무-산출물-개선효과”까지 구체화해야 합니다.
>

### 7.3 40시간 PBL 코칭 ‘최적 과정 1개’(필수)

NxM 과정들 중, 코치가 실제로 PBL 기반으로 멘토링하기 가장 적합한 1개를 선정합니다.

- 선정 기준(예시):
  - 임팩트(업무 개선폭), 적용 가능성(데이터/시스템 제약), 난이도-시간 적합성(≤40h),
  - 확산성(다른 업무로의 재사용), 고객 우선순위
- 제공 내용:
  - 선정 이유(근거)
  - 주차/회차별 계획(예: 8회×5h 또는 10회×4h 등)
  - 과제/산출물 제출 기준
  - 평가 기준(정량/정성)
  - 현장 적용 체크리스트

### 7.4 과정 상세 리스트업(필수)

로드맵에 포함된 “모든 과정”에 대해 아래 필드를 리스트업합니다.

- 과정명
- 레벨(초/중/고)
- 대상 세부직무/세부업무
- 교육대상(직급/직무)
- 권장 교육시간(시간) ≤ 40
- 커리큘럼(세션/모듈 구성)
- 실습/과제(산출물, 실질적인 세부업무 개선 중심)
- 사용 툴(무료 전제 표기)
- 기대효과 + 측정방법
- 준비물/데이터/권한

> “AI 활용 문서 생성” 수준의 범용적인 AI 교육은 금지합니다. 반드시 고객사 요구사항/페인포인트 등을 반영해 “직무-업무-산출물-개선효과”까지 구체화해야 합니다.
>

---

## 8. 무료 툴 정책(“Tool DB 없이” 강제하는 방법)

**[정의]:** 본 기획서에서 “무료/무료범위/오픈소스”란

1. 완전 무료,
2. 무료 플랜/커뮤니티 에디션에서 **실제 결제 없이** 사용 가능한 범위,
3. 로컬 설치/오픈소스로 **비용 없이** 사용 가능한 경우를 의미합니다.
    - **유료 결제가 필수인 기능/플랜은 제외**합니다.
    - 단, 계정 생성/카드 등록이 필요하더라도 실제 결제가 발생하지 않고 무료 이용이 가능한 경우는 허용하되, 결과물에 제약(예: 사용량/기능 제한)을 명시합니다.

Tool DB를 별도로 구축하지 않는 대신, 아래 3겹으로 통제합니다.

- **생성 규칙(프롬프트 레벨)**
  - 유료 좌석/고가 구독이 필요한 툴은 추천 금지
  - 유료 툴 언급이 필요하면:
    - “무료 범위 내에서 가능한 사용 방식”을 명시하고
    - 가능하면 동일 목적의 “오픈소스/무료 대안”을 함께 제시
- **검증(시스템 레벨)**
  - 결과 JSON/표에 “무료 범위 표기”가 누락되면 재생성
  - ‘구독 필요/유료 좌석/결제 필요’ 등의 표현이 포함되면 경고 및 재생성
  - 1차는 규칙 기반(키워드)으로 충분히 시작하고, 품질 이슈가 생기면 운영자가 금지어/예외를 관리하는 “정책 테이블(아주 얇은 규칙)”로 확장 가능 (이는 Tool DB가 아니라 “금지/경고 정책”입니다.)
- **운영정책(사후 품질 관리)**
  - FINAL 확정 전, 컨설턴트/운영관리자가 결과를 검토할 수 있는 체크리스트 제공
  - 무료 정책 위반이 발견되면 해당 버전은 FINAL 금지(플래그)

---

## 9. 교육시간 정책(40시간 상한)

- 로드맵에 포함되는 **모든 교육과정은 권장 교육시간 ≤ 40시간**을 준수합니다.
  - 위 “≤40시간”은 **과정 1개 단위의 상한**을 의미하며, NxM 로드맵에 포함된 모든 후보 과정의 “합산시간”을 40시간으로 제한한다는 뜻이 아닙니다.

---

## 10. 데이터 저장 범위 & 데이터 모델(초안)

### 10.1 DB에 저장하는 것

- 사용자/권한/승인 상태
- 컨설턴트 프로필(정형 태그 + 서술)
- 기업 요청(프로젝트)
  - 기업 기본 정보
  - 자가진단 응답(원본) + 점수 + 요약
  - 매칭 추천 결과(스코어, 근거)
  - 배정/변경 이력(사유 포함)
- 인터뷰 입력(정형 + 자유서술)
- 로드맵 결과(구조화 데이터) + 버전 이력
- 수정 요청(Revision Prompt) 로그
- 감사로그(이벤트 로그)
- 사용량/쿼터 집계

### 10.2 추천 테이블(예시) - 예시이므로 꼭 이대로 만들지는 않아도 됨

- `users` (id, email, role, status, created_at …)
- `consultant_profiles` (user_id, tags[], domains[], years, narrative, availability …)
- `projects` (id, company_name, industry, size_bucket, created_by_ops, status, assigned_consultant_id …; status 전이 정의 포함)
  - status(예시): NEW(프로젝트 생성) → DIAGNOSED(자가진단 입력 완료) → MATCH_RECOMMENDED(매칭 추천 생성) → ASSIGNED(배정 완료) → INTERVIEWED(인터뷰 입력 완료) → ROADMAP_DRAFTED(초안 생성) → FINALIZED(FINAL 확정)
  - 규칙: 상태 변경은 모두 감사로그에 기록하며, ASSIGNED 이후 배정 변경이 발생하면 "변경 사유"를 필수로 남깁니다.
- `self_assessments` (project_id, template_version, answers_json, scores_json, summary_text …)
- `matching_recommendations` (project_id, candidate_user_id, score, rationale_json, created_at …)
- `interviews` (project_id, interviewer_user_id, structured_json, notes_text …)
- `roadmap_versions` (project_id, version_no, status(DRAFT/FINAL/ARCHIVED), roadmap_json, courses_json, pbl_json, created_at …)
- `audit_logs` (actor_user_id, action, target_type, target_id, meta_json, success, created_at …)
- `usage_metrics` (user_id, day, month, llm_calls, tokens_in, tokens_out …)

---

## 11. 버전/파일 정책

- 모든 버전은 DB에 “구조화 결과(텍스트/표/JSON)”로 저장
- PDF/XLSX는 다운로드 시 DB 결과를 렌더링해 생성(LLM 재호출 금지)
- 스토리지 저장은 **최신 FINAL 1개**만 유지
  - 새 FINAL 확정 시 기존 FINAL 파일 삭제 + 상태 ARCHIVED로 유지

---

## 12. 화면 구성(IA)

### 12.1 PUBLIC

- 랜딩/소개
- 샘플(데모): 정적 화면(LLM 호출 / DB 저장 없음)
- 로그인/회원가입
  - 회원가입 시 개인정보 수집·이용 동의(수집 항목/목적/보관기간 고지 포함)

### 12.2 컨설턴트(CONSULTANT_APPROVED)

- 배정된 프로젝트 목록
- 프로젝트 상세
  - 기업 기본 정보(읽기)
  - 자가진단 요약(읽기)
  - 인터뷰 입력/수정
  - 로드맵 생성/버전 히스토리
  - 결과 화면(NxM + PBL 최적 과정 + 상세 리스트)
  - 수정 요청(Revision Prompt) + 새 버전 생성
  - 수동 편집(셀/과정 편집) + 검증(무료/40h)
  - FINAL 확정 + 다운로드(PDF/XLSX)

### 12.3 운영관리자(OPS_ADMIN)

- 사용자 승인/정지
- 프로젝트 관리
  - 프로젝트 생성(기업정보 입력)
  - 자가진단 입력/수정(OPS만)
  - 매칭 추천 보기(Top-N + 근거)
  - 배정/변경(사유 기록)
- 자가진단 템플릿 관리(문항/차원/버전)
- 감사로그/사용량/쿼터 대시보드
- 로드맵 열람(읽기 전용, 품질관리/감사 목적)

---

## 13. 반응형(모바일) 설계 원칙

NxM 표는 모바일에서 그대로 보여주기 어렵기 때문에, 아래를 필수로 합니다.

- 모바일에서는 NxM을 “표 1개”가 아니라,
  - (옵션 A) 세부직무(행) 선택 → 초/중/고 카드 3개로 표시
  - (옵션 B) 레벨(열) 탭 선택 → 해당 레벨의 행 리스트 카드로 표시
    형태로 전환합니다.
- 결과 화면의 핵심(로드맵, PBL 40h, 상세 리스트)은 모바일에서도 완전 동작해야 합니다.
- 입력 폼(인터뷰/수정요청)은 모바일에서 타이핑이 쉽도록 단계형(섹션 분리) UI를 권장합니다.

---

## 14. 감사로그 & 사용량/쿼터

### 14.1 감사로그(필수)

아래 이벤트는 반드시 남깁니다.

- 사용자 승인/정지
- 프로젝트 생성/수정
- 자가진단 입력/수정
- 매칭 실행/배정/변경(사유 포함)
- 로드맵 생성/수정(새 버전)/FINAL 확정/ARCHIVE
- 다운로드(PDF/XLSX) (선택: 빈도만 기록)

### 14.2 쿼터(필수)

- LLM 호출이 발생하는 기능(생성/수정 반영)에만 쿼터 차감
- 일/월 단위 상한, KST 기준 리셋
- 운영관리자가 사용자별 상한 조정 가능
- 초과 시 생성/수정 호출 차단 + 안내 문구

---

## 15. 기술 아키텍처(권장)

- **웹앱**: Next.js(프론트 + 서버 API Routes)
- **DB/Auth/RLS**: Supabase(Postgres + Auth)
- **파일 스토리지**: Supabase Storage(최신 FINAL만 저장)
- **LLM 호출**: 서버에서만(키 노출 금지)

---

## 16. 완료 기준(Definition of Done)

- 운영관리자(OPS_ADMIN)가 **기업 정보 + 자가진단 결과를 직접 입력**해 프로젝트를 생성할 수 있다.
- 시스템이 **자가진단+기업정보 기반 매칭 Top-N**을 제시하고, 운영관리자가 배정/변경(사유 기록)할 수 있다.
- 승인 컨설턴트는 **배정된 프로젝트만 접근**하여 자가진단을 조회하고, 현장 인터뷰를 입력할 수 있다.
- 인터뷰 입력 후, 시스템이 **NxM 로드맵**을 생성하며 각 셀은 “직무-업무-산출물-개선효과-측정방법-무료툴-시간(≤40h)”을 포함한다.
- NxM 중 **40시간 PBL 최적 과정 1개(≤40h)** 가 자동 선정되고 상세 계획이 제공된다.
- 결과는 수정 요청으로 버전이 누적되며(FINAL 덮어쓰기 금지), FINAL은 1개만 유지된다.
- PDF/XLSX 다운로드가 가능하며, 스토리지에는 최신 FINAL만 저장된다.
- 감사로그/사용량/쿼터가 정상 동작한다.
- 데스크톱/노트북/태블릿/모바일에서 본 대시보드가 반응형으로 정상 동작한다.

---
